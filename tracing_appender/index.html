<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Writers for logging events and spans"><title>tracing_appender - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-aa0817cf.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="tracing_appender" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0 (1159e78c4 2025-09-14)" data-channel="1.90.0" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-68b7e25d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../tracing_appender/index.html"><img src="https://raw.githubusercontent.com/tokio-rs/tracing/master/assets/logo-type.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../tracing_appender/index.html"><img src="https://raw.githubusercontent.com/tokio-rs/tracing/master/assets/logo-type.png" alt="logo"></a><h2><a href="../tracing_appender/index.html">tracing_<wbr>appender</a><span class="version">0.2.3</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#overview" title="Overview">Overview</a></li><li><a href="#usage" title="Usage">Usage</a><ul><li><a href="#file-appender" title="File Appender">File Appender</a></li><li><a href="#non-blocking-writer" title="Non-Blocking Writer">Non-Blocking Writer</a></li><li><a href="#non-blocking-rolling-file-appender" title="Non-Blocking Rolling File Appender">Non-Blocking Rolling File Appender</a></li><li><a href="#supported-rust-versions" title="Supported Rust Versions">Supported Rust Versions</a></li></ul></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>tracing_appender</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/tracing_appender/lib.rs.html#1-201">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Writers for logging events and spans</p>
<h2 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h2>
<p><a href="https://docs.rs/tracing/"><code>tracing</code></a> is a framework for structured, event-based diagnostic information.
<code>tracing-appender</code> allows events and spans to be recorded in a non-blocking manner through
a dedicated logging thread. It also provides a <a href="rolling/struct.RollingFileAppender.html" title="struct tracing_appender::rolling::RollingFileAppender"><code>RollingFileAppender</code></a> that can
be used with <em>or</em> without the non-blocking writer.</p>
<p><em>Compiler support: <a href="#supported-rust-versions">requires <code>rustc</code> 1.63+</a></em></p>
<h2 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h2>
<p>Add the following to your <code>Cargo.toml</code>:</p>
<div class="example-wrap"><pre class="language-toml"><code>tracing-appender = &quot;0.2&quot;</code></pre></div>
<p>This crate can be used in a few ways to record spans/events:</p>
<ul>
<li>Using a <a href="rolling/struct.RollingFileAppender.html" title="struct tracing_appender::rolling::RollingFileAppender"><code>RollingFileAppender</code></a> to perform writes to a log file. This will block on writes.</li>
<li>Using <em>any</em> type implementing <a href="https://doc.rust-lang.org/1.90.0/std/io/trait.Write.html" title="trait std::io::Write"><code>std::io::Write</code></a> in a non-blocking fashion.</li>
<li>Using a combination of <a href="non_blocking/index.html" title="mod tracing_appender::non_blocking"><code>NonBlocking</code></a> and <a href="rolling/struct.RollingFileAppender.html" title="struct tracing_appender::rolling::RollingFileAppender"><code>RollingFileAppender</code></a> to allow writes to a log file
without blocking.</li>
</ul>
<h3 id="file-appender"><a class="doc-anchor" href="#file-appender">§</a>File Appender</h3>
<p>The <a href="rolling/index.html" title="mod tracing_appender::rolling"><code>rolling</code> module</a> provides functions to create rolling and non-rolling file
appenders.</p>
<p>Rolling file appender rotation options are <a href="rolling/struct.Rotation.html#associatedconstant.MINUTELY" title="associated constant tracing_appender::rolling::Rotation::MINUTELY"><code>Rotation::MINUTELY</code></a>,
<a href="rolling/struct.Rotation.html#associatedconstant.HOURLY" title="associated constant tracing_appender::rolling::Rotation::HOURLY"><code>Rotation::HOURLY</code></a>, and
<a href="rolling/struct.Rotation.html#associatedconstant.DAILY" title="associated constant tracing_appender::rolling::Rotation::DAILY"><code>Rotation::DAILY</code></a>.</p>
<p>To create a non-rolling file appender, use
<a href="rolling/fn.never.html" title="fn tracing_appender::rolling::never"><code>tracing_appender::rolling::never(/*...*/)</code></a> or
<a href="rolling/struct.Rotation.html#associatedconstant.NEVER" title="associated constant tracing_appender::rolling::Rotation::NEVER"><code>Rotation::NEVER</code></a>.</p>
<p>The following example creates an hourly rotating file appender that writes to
<code>/some/directory/prefix.log.YYYY-MM-DD-HH</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>file_appender = tracing_appender::rolling::hourly(<span class="string">"/some/directory"</span>, <span class="string">"prefix.log"</span>);</code></pre></div>
<p>The file appender implements <a href="https://doc.rust-lang.org/1.90.0/std/io/trait.Write.html" title="trait std::io::Write"><code>std::io::Write</code></a>. To be used with
<a href="../tracing_subscriber/fmt/struct.Subscriber.html" title="struct tracing_subscriber::fmt::Subscriber"><code>tracing_subscriber::FmtSubscriber</code></a>, it must be combined with a
<a href="../tracing_subscriber/fmt/writer/trait.MakeWriter.html" title="trait tracing_subscriber::fmt::writer::MakeWriter"><code>MakeWriter</code></a> implementation to be able to record tracing spans/event.</p>
<p>See the <a href="rolling/index.html" title="mod tracing_appender::rolling"><code>rolling</code> module</a>’s documentation for more detail on how to use this file
appender.</p>
<h3 id="non-blocking-writer"><a class="doc-anchor" href="#non-blocking-writer">§</a>Non-Blocking Writer</h3>
<p>The example below demonstrates the construction of a <code>non_blocking</code> writer with <code>std::io::stdout()</code>,
which implements <a href="../tracing_subscriber/fmt/writer/trait.MakeWriter.html" title="trait tracing_subscriber::fmt::writer::MakeWriter"><code>MakeWriter</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>(non_blocking, _guard) = tracing_appender::non_blocking(std::io::stdout());
tracing_subscriber::fmt()
    .with_writer(non_blocking)
    .init();</code></pre></div>
<p><strong>Note:</strong> <code>_guard</code> is a <a href="non_blocking/struct.WorkerGuard.html" title="struct tracing_appender::non_blocking::WorkerGuard"><code>WorkerGuard</code></a> which is returned by <a href="non_blocking/index.html" title="mod tracing_appender::non_blocking"><code>tracing_appender::non_blocking</code></a>
to ensure buffered logs are flushed to their output in the case of abrupt terminations of a process.
See <a href="non_blocking/struct.WorkerGuard.html" title="struct tracing_appender::non_blocking::WorkerGuard"><code>WorkerGuard</code> module</a> for more details.</p>
<p>The example below demonstrates the construction of a <a href="non_blocking/index.html" title="mod tracing_appender::non_blocking"><code>tracing_appender::non_blocking</code></a>
writer constructed with a <a href="https://doc.rust-lang.org/1.90.0/std/io/trait.Write.html" title="trait std::io::Write"><code>std::io::Write</code></a>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::io::Error;

<span class="kw">struct </span>TestWriter;

<span class="kw">impl </span>std::io::Write <span class="kw">for </span>TestWriter {
    <span class="kw">fn </span>write(<span class="kw-2">&amp;mut </span><span class="self">self</span>, buf: <span class="kw-2">&amp;</span>[u8]) -&gt; std::io::Result&lt;usize&gt; {
        <span class="kw">let </span>buf_len = buf.len();
        <span class="macro">println!</span>(<span class="string">"{:?}"</span>, buf);
        <span class="prelude-val">Ok</span>(buf_len)
    }

    <span class="kw">fn </span>flush(<span class="kw-2">&amp;mut </span><span class="self">self</span>) -&gt; std::io::Result&lt;()&gt; {
        <span class="prelude-val">Ok</span>(())
    }
}

<span class="kw">let </span>(non_blocking, _guard) = tracing_appender::non_blocking(TestWriter);
tracing_subscriber::fmt()
    .with_writer(non_blocking)
    .init();</code></pre></div>
<p>The <a href="non_blocking/index.html" title="mod tracing_appender::non_blocking"><code>non_blocking</code> module</a>’s documentation provides more detail on how to use <code>non_blocking</code>.</p>
<h3 id="non-blocking-rolling-file-appender"><a class="doc-anchor" href="#non-blocking-rolling-file-appender">§</a>Non-Blocking Rolling File Appender</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>file_appender = tracing_appender::rolling::hourly(<span class="string">"/some/directory"</span>, <span class="string">"prefix.log"</span>);
<span class="kw">let </span>(non_blocking, _guard) = tracing_appender::non_blocking(file_appender);
tracing_subscriber::fmt()
    .with_writer(non_blocking)
    .init();</code></pre></div>
<h3 id="supported-rust-versions"><a class="doc-anchor" href="#supported-rust-versions">§</a>Supported Rust Versions</h3>
<p><code>tracing-appender</code> is built against the latest stable release. The minimum supported
version is 1.63. The current <code>tracing-appender</code> version is not guaranteed to build on
Rust versions earlier than the minimum supported version.</p>
<p>Tracing follows the same compiler support policies as the rest of the Tokio
project. The current stable Rust compiler and the three most recent minor
versions before it will always be supported. For example, if the current
stable compiler version is 1.69, the minimum supported version will not be
increased past 1.66, three minor versions prior. Increasing the minimum
supported compiler version is not considered a semver breaking change as
long as doing so complies with this policy.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="non_blocking/index.html" title="mod tracing_appender::non_blocking">non_<wbr>blocking</a></dt><dd>A non-blocking, off-thread writer.</dd><dt><a class="mod" href="rolling/index.html" title="mod tracing_appender::rolling">rolling</a></dt><dd>A rolling file appender.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.non_blocking.html" title="fn tracing_appender::non_blocking">non_<wbr>blocking</a></dt><dd>Convenience function for creating a non-blocking, off-thread writer.</dd></dl></section></div></main></body></html>