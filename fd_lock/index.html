<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Advisory reader-writer locks for files."><title>fd_lock - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-aa0817cf.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="fd_lock" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0 (1159e78c4 2025-09-14)" data-channel="1.90.0" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-68b7e25d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../fd_lock/index.html">fd_lock</a><span class="version">4.0.4</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#notes-on-advisory-locks" title="Notes on Advisory Locks">Notes on Advisory Locks</a></li><li><a href="#example" title="Example">Example</a></li></ul><h3><a href="#structs">Crate Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>fd_lock</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/fd_lock/lib.rs.html#1-43">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Advisory reader-writer locks for files.</p>
<h2 id="notes-on-advisory-locks"><a class="doc-anchor" href="#notes-on-advisory-locks">§</a>Notes on Advisory Locks</h2>
<p>“advisory locks” are locks which programs must opt-in to adhere to. This
means that they can be used to coordinate file access, but not prevent
access. Use this to coordinate file access between multiple instances of the
same program. But do not use this to prevent actors from accessing or
modifying files.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::io::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>std::fs::File;
<span class="kw">use </span>fd_lock::RwLock;

<span class="comment">// Lock a file and write to it.
</span><span class="kw">let </span><span class="kw-2">mut </span>f = RwLock::new(File::open(<span class="string">"foo.txt"</span>)<span class="question-mark">?</span>);
<span class="macro">write!</span>(f.write()<span class="question-mark">?</span>, <span class="string">"chashu cat"</span>)<span class="question-mark">?</span>;

<span class="comment">// A lock can also be held across multiple operations.
</span><span class="kw">let </span><span class="kw-2">mut </span>f = f.write()<span class="question-mark">?</span>;
<span class="macro">write!</span>(f, <span class="string">"nori cat"</span>)<span class="question-mark">?</span>;
<span class="macro">write!</span>(f, <span class="string">"bird!"</span>)<span class="question-mark">?</span>;</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.RwLock.html" title="struct fd_lock::RwLock">RwLock</a></dt><dd>Advisory reader-writer lock for files.</dd><dt><a class="struct" href="struct.RwLockReadGuard.html" title="struct fd_lock::RwLockReadGuard">RwLock<wbr>Read<wbr>Guard</a></dt><dd>RAII structure used to release the shared read access of a lock when
dropped.</dd><dt><a class="struct" href="struct.RwLockWriteGuard.html" title="struct fd_lock::RwLockWriteGuard">RwLock<wbr>Write<wbr>Guard</a></dt><dd>RAII structure used to release the exclusive write access of a lock when
dropped.</dd></dl></section></div></main></body></html>